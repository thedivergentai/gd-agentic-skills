> [!NOTE]
> **Resource Context**: This module provides expert patterns for **UI Theming**. Accessed via Godot Master.

# UI Theming

Expert blueprint for building visually consistent and skin-able user interfaces using Godot's Theme resource system and StyleBoxes.

## Available Scripts

### [global_theme_manager.gd](../scripts/ui_theming_global_theme_manager.gd)
Expert manager for handling dynamic theme switching (e.g., Light vs. Dark mode) at runtime. Propagates theme changes across the entire scene tree and handles fallback logic for missing style definitions.

### [ui_scale_manager.gd](../scripts/ui_theming_ui_scale_manager.gd)
Manages font sizes and StyleBox margins dynamically based on DPI or user preferences. Ensures that the UI remains readable and aesthetically pleasing across 1080p, 4K, and low-res handheld screens.


## NEVER Do

- **NEVER create new `StyleBoxFlat` instances in `_ready()` for many nodes** — If you have 100 buttons each creating their own StyleBox in a script, you've created 100 unique objects in memory. Create one StyleBox in a **Theme Resource** and let nodes inherit it.
- **NEVER ignore Theme Inheritance** — Setting a custom theme on a mid-level Control node will prevent it from inheriting styles from the root. Use inheritance strategically to avoid re-defining the same styles.
- **NEVER hardcode hex codes or colors in scripts** — Defining colors like `Color("#ff0000")` inside GDScripts makes it impossible to switch themes globally. Reference theme-native colors: `theme.get_color("accent_color", "Button")`.
- **NEVER use `add_theme_override` for common styles** — Manually overriding the font or background of every button in your app is unmaintainable. Define these properties in a shared `.theme` file.
- **NEVER modify global Theme resources in `_process()`** — Changing a property on a shared Theme resource triggers a layout update for every visible node using that theme. Do this only once during initialization or upon explicit user request.
- **NEVER skip the `corner_radius_all` shortcut** — For simple rounded corners, don't set all four values manually. In `StyleBoxFlat`, setting `corner_radius_all = 8` is faster and reduces coding errors.

---

## The Theme Resource (`.theme`)
This is the "CSS" of Godot. It contains:
- **StyleBoxes**: Definitions for backgrounds (Flat, Texture, Line).
- **Fonts**: TTF/OTF files and their specific sizes.
- **Colors**: Named color keys for specific UI components.
- **Constants**: Values like `separation`, `margin`, or `outline_size`.

## StyleBox Patterns
- **StyleBoxFlat**: Efficient, generated by code/GPU. Use for modern, clean UI with shadows and border radii.
- **StyleBoxTexture**: Uses sprites or 9-slice (Patch9) textures. Use for "diegetic" or complex organic UI panels.
- **StyleBoxEmpty**: Used when you want a node to be invisible but still interactive or space-filling.

## Runtime Skinning
Use `global_theme_manager.gd` to swap themes:
1. `var new_theme = load("res://themes/dark_mode.theme")`
2. `get_tree().root.theme = new_theme`
Godot will automatically refresh all nodes in the tree with the new visual parameters.

## Component-Level Overrides
If a single button needs a unique look that doesn't belong in the global theme, use the **Theme Overrides** section in the Inspector. This is preferred over creating a whole new theme resource for a minor tweak.

## Reference
- [Godot Docs: Introduction to GUI Skinning](https://docs.godotengine.org/en/stable/tutorials/ui/gui_skinning.html)
- [Godot Docs: Using Themes](https://docs.godotengine.org/en/stable/tutorials/ui/gui_theme_interactive.html)
